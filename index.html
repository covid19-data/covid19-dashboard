<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46647600-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-46647600-3');
    </script>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  	<title>Coronavirus Trend Visualization</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  	<style>
  		body {
  			line-height: 1.4;
  			font-size: 20px;
  		}
  		h1{font-size: 200%;
         text-align: center;
      }
  		h2{font-size: 150%}
  		h3{font-size: 120%}
    </style>
  </head>
  <body>
    <aside>
      <div id="sidebar">
          <div style="margin-top: 100px"></div>
            <a href="#h2trend">Trend</a>
            <a href="#h2trajectory">Trajectory</a>
            <a href="#h2fatality">Fatality</a>
          </div>
    </aside>

   <div id="wrapper">
    <header>
      <h1>COVID-19 Trend Visualizations</h1>
    </header>

    <div id="trend-viz">
      <a class="anchor" name="h2trend"></a>
      <h2>Case Trend</h2>
      <div class="row">
         <div id="viewof-pivot_n" class="viewof column"></div>
         <div id="viewof-num_days" class="viewof column"></div>
      </div> 
      <div id="viewof-selected_regions" class="viewof"></div>
      <div id="viewof-y_type" class="viewof"></div>
      <div id="trend_chart" class="chart"></div>
      <div id="trend_swatch"></div>
      <div id="explanation">
      <p>This visualization shows the growth in the number of cases in log-linear scale. A straight line indicates that the growth is exponential and double every X days. You can set the number of days to include in calculating the trend by using the slider. </p>

      <p>Improve this visualization on ObservableHQ: <a href="https://observablehq.com/@yy/covid-19-spreading-trends">https://observablehq.com/@yy/covid-19-spreading-trends</a></p>
      </div>
    </div>

    <hr style="width:100%; color:grey;">

    <div id="trajectory-viz">
      <a class="anchor" name="h2trajectory"></a>
      <h2>Confirmed & New Cases</h2>
      <div class="row">
         <div id="viewof-yTypeT" class="viewof column"></div>
         <div id="viewof-timeSliderT" class="viewof column"></div>
      </div>

      <div class="row">
         <div id="viewof-currDateT" class="viewof column"></div>
         <div id="viewof-playSpeedT" class="viewof column"></div> 
      </div>
      <div id="viewof-selectedRegionsT" class="viewof" style="margin-top: -10px"></div>
      <div id="Tchart" class="chart"></div>
      <div id="Tswatch"></div>
      <div id="viewof-lableMyCountry" class="viewof" style="margin-left: 50px"></div>
      <div id="explanation">
      <p>A recreation of the visualization by <a href="https://aatishb.com/covidtrends/">Aatish Bhatia</a> & <a href="https://www.youtube.com/watch?v=54XLXg4fYsc">minutephysics</a>. </p>

      <p>Data: <a href="https://github.com/covid19-data/covid19-data">https://github.com/covid19-data/covid19-data</a>. </p> 
      </div>
    </div>

    <div id="fatality-viz">
      <a class="anchor" name="h2fatality"></a>
      <h2>Case Fatality Rate</h2>

      <div class="row">   
         <div id="viewof-timeSliderFatality" class="viewof column"></div>
         <div id="viewof-playSpeedFatality" class="viewof column"></div>
      </div>

      <div class="row">
         <div id="viewof-radius_type" class="viewof column"></div>
         <div id="viewof-currDateF" class="viewof column"></div> 
      </div>
      
      <div id="viewof-delay_parameter" class="viewof"></div>
      <div id="Fchart" class="chart"></div>
      <div id="Fswatch"></div>
      <div id="explanation">
      <p>This visualization shows the temporal evolution of national-level confirmed cases and the number of deaths, for the countries with at least one death. You can <strong>mouse-over</strong> to see the past trajectory.</p> 

      <p>Please note that the case fatality is affected by various factors, particularly <em>at the early stage of the outbreak</em>. First of all, the progression from contracting the disease to death takes time. Therefore, the fatality rate would increase for a while even after the number of cases stop increasing. Also the early-stage fatality rate may either be <em>underestimated</em> if there are aggressive testing (many early detected cases, but not yet progressed to deaths) or <em>overestimated</em> (deaths occur before adequate testing can be done).</p> 

      <p>Because of strong age-related fatality rate variance, population structure (e.g. Italy has more elderly population than South Korea, although <a href="https://www.reddit.com/r/dataisbeautiful/comments/fj0eef/oc_coronavirus_death_rate_by_age_italy_vs_china/">this is not enough to explain the high fatality in Italy</a>) or the nature of early clustered outbreaks (e.g. <a href="https://en.wikipedia.org/wiki/2020_coronavirus_pandemic_in_South_Korea#18_February%E2%80%93present_outbreak">South Korea</a> vs. <a href="https://en.wikipedia.org/wiki/Life_Care_Centers_of_America#Kirkland,_Washington_COVID-19_outbreak">US</a>) may significantly affect the case fatality rate, especially at the early stage.</p>

      <p>Yet, fatality rate is an important indicator that reflects many serious scenarios that require attention, such as (i) large, undetected community spreading, (ii) extreme stress to the healthcare system (more preventable deaths), or (iii) emergence of more aggressive subtype.</p>

      <p>Improve this visualization on ObservableHQ: <a href="https://observablehq.com/@yy/covid-19-fatality-rate">https://observablehq.com/@yy/covid-19-fatality-rate</a></p>
      </div>
    </div>

    <div>
      <h2>Contribute</h2>
      <div id="explanation"
        <p>These visualizations are created by <a href="https://yongyeol.com/">YY Ahn</a> (<a href="https://twitter.com/yy">@yy</a>) and <a href="https://www.linkedin.com/in/sina-kianersi-b311b3b1/">Sina Kianersi</a> (<a href="https://twitter.com/sina_kianersi">@sina_kianersi</a>) at the <a href="https://www.indiana.edu">Indiana University Bloomington</a>. The visualization is built on <a href="https://observablehq.com/@mbostock/the-wealth-health-of-nations">the recreation of GapMinder visualization</a> by <a href="https://observablehq.com/@mbostock">@mbostock</a>.</p>

        <ul>
          <li>Contributors: <a href="https://twitter.com/alphastanley">@alphastanley</a></li>
          <li>You can check out the source code on ObservableHQ: <a href="https://observablehq.com/@yy/covid-19-fatality-rate">https://observablehq.com/@yy/covid-19-fatality-rate</a> and <a href="https://observablehq.com/@yy/covid-19-spreading-trends">https://observablehq.com/@yy/covid-19-spreading-trends</a></li>
          <li>Data and workflow: <a href="https://github.com/yy/covid19-data">https://github.com/yy/covid19-data</a></li>
        </ul>
        </div>
      </div>
  </div>

  	<script type="module">
      import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";

      function render(_node, value) {
        if (!(value instanceof Element)) {
          const el = document.createElement("span");
          el.innerHTML = value;
          value = el;
        }
        if (_node.firstChild !== value) {
          if (_node.firstChild) {
            while (_node.lastChild !== _node.firstChild) _node.removeChild(_node.lastChild);
            _node.replaceChild(value, _node.firstChild);
          } else {
            _node.appendChild(value);
          }
        }
      }

      import notebookSpreading from "https://api.observablehq.com/d/4cd98169fdfdd8b3.js?v=3"; 
      const rendersSpreading = {
      	"viewof y_type": "#viewof-y_type",
        "viewof pivot_n": "#viewof-pivot_n",
        "viewof num_days": "#viewof-num_days",
        //"viewof doubling_periods": "#viewof-doubling_periods",
        "viewof selected_regions": "#viewof-selected_regions",
        "swatch": "#trend_swatch",
        "chart": "#trend_chart",
      }

      const runtimeSpreading = new Runtime();
      const mainSpreading = runtimeSpreading.module(notebookSpreading, name => {
         const selector = rendersSpreading[name];
          if (selector) {
              return new Inspector(document.querySelector(selector));
          } else {
              return true;
          }
      });

      import notebookTrajectory from "https://api.observablehq.com/d/87e6003e4f4aab00.js?v=3";
      const rensersTrajectory = {
        "viewof yTypeT": "#viewof-yTypeT",
        "viewof timeSliderT": "#viewof-timeSliderT",
        "viewof lableMyCountry": "#viewof-lableMyCountry",
        "viewof playSpeedT": "#viewof-playSpeedT",
        "viewof currDateT": "#viewof-currDateT",
        "viewof selectedRegionsT": "#viewof-selectedRegionsT",
        "Tswatch": "#Tswatch",
        "Tchart": "#Tchart"
      }

      const runtimeTrajectory = new Runtime();
      const mainTrajectory = runtimeTrajectory.module(notebookTrajectory, name => {
         const selector = rensersTrajectory[name];
          if (selector) {
              return new Inspector(document.querySelector(selector));
          } else {
              return true;
          }
      });

      import notebookFatality from "https://api.observablehq.com/d/945cb14c5e8290a8.js?v=3";
      
      const rensersFatality = {
        "viewof delay_parameter": "#viewof-delay_parameter",
        "viewof timeSliderFatality": "#viewof-timeSliderFatality",
        "viewof playSpeedFatality": "#viewof-playSpeedFatality",
        "viewof currDateF": "#viewof-currDateF",
        "viewof radius_type": "#viewof-radius_type",
        "Fswatch": "#Fswatch",
        "Fatality_chart": "#Fchart",
      }

      const runtimeFatality = new Runtime();
      const mainFatality = runtimeFatality.module(notebookFatality, name => {
         const selector = rensersFatality[name];
          if (selector) {
              return new Inspector(document.querySelector(selector));
          } else {
              return true;
          }
      });

  	</script>
  </body>
</html>